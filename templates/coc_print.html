{% extends "base.html" %}
{% block content %}

<section class="card">
  <div style="display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap;">
    <div>
      <h1 style="margin:0;">Chain of Custody â€” Print</h1>
      <p style="margin:6px 0 0 0; opacity:.8;">
        Generated (UTC): {{ now }}
      </p>
    </div>
    <div style="display:flex; gap:8px; flex-wrap:wrap;">
      <button class="button" onclick="window.print()">Print</button>
      <a class="button" href="{{ url_for('coc_export_pdf') }}">Download PDF</a>
      <a class="button" href="{{ url_for('coc_list') }}">Back</a>
    </div>
  </div>
</section>

<section class="card">
  <div style="overflow:auto;">
    <table class="table" style="width:100%; border-collapse:collapse;">
      <thead>
        <tr>
          <th>SAMPLE I.D. / NAME</th>
          <th>LAB ID#</th>
          <th>ASIN (Identifier)</th>
          <th>SAMPLE TYPE</th>
          <th>SHIPPED BY</th>
          <th>SAMPLE CONDITION</th>
          <th>TEST(S) REQUESTED</th>
          <th>Status</th>
          <th>Received (UTC)</th>
          <th>Received By</th>
        </tr>
      </thead>
      <tbody>
        {% for r in records %}
          <tr>
            <td>{{ r.sample_name or "" }}</td>
            <td>{{ r.lab_id or "" }}</td>
            <td>{{ r.asin or "" }}</td>
            <td>{{ r.sample_type or r.matrix or "" }}</td>
            <td>{{ r.carrier_name or "" }}</td>
            <td>{{ r.sample_condition or "" }}</td>
            <td>{{ r.anticipated_chemical or "" }}</td>
            <td>{{ r.status or "" }}</td>
            <td>
              {% if r.received_at %}
                {{ r.received_at.strftime("%Y-%m-%d %H:%M:%S") }}
              {% endif %}
            </td>
            <td>{{ r.received_by or "" }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>

<style>
  @media print {
    .site-header, .site-footer, .button { display: none !important; }
    .card { box-shadow: none !important; border: none !important; }
  }
</style>

{% endblock %}
